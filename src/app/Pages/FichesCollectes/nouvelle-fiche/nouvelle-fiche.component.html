


<app-fiche-programmer (isReturn)="isReturn($event)" [idFicheInput]="idFicheInput" [nomFicheInput]="nomFicheInput"
                      *ngIf="idFicheInput!=null"></app-fiche-programmer>

<app-page-title [heading]="'CommunTranslate.FicheCollecte.heading' | translate" [subheading]="subheading" [icon]="icon" *ngIf="idFicheInput==null"></app-page-title>
<div class="tabs-animation" *ngIf="idFicheInput==null">


  <ngb-tabset [destroyOnHide]="false">
    <ngb-tab title="{{'CommunTranslate.FicheCollecte.enregistrementFichesCollectes' | translate}}">
      <ng-template ngbTabContent>
        &nbsp;
        &nbsp;
        &nbsp;
        &nbsp;


        <!--premier fomulaire information generale-->
        <form name="form" #f="ngForm" (ngSubmit)="f.form.valid && onSaveFicheCollecte(f.value)" novalidate>
          <input name="idFicher" value="{{valeuridFicher}}" style="display: none" ngModel/>

          <div class="mb-3 card">

            <div class="card-header-tab card-header form-row">
              <div class="card-header-title font-size-lg text-capitalize font-weight-normal col-md-6">
                <h5 class="card-title">{{'CommunTranslate.FicheCollecte.labelTitreFormulaire' | translate}}</h5>
              </div>

              <div class="col-md-6 text-right">
                <button type="submit" class="btn btn-info btn-lg" [disabled]="f.invalid">{{labelButtonSave}}</button>&nbsp;
                <button *ngIf="labelButtonSave!='Enregistrer'" class="btn btn-danger btn-lg" (click)="cancelAction()">
                  {{'CommunTranslate.FicheCollecte.annuler' | translate}}
                </button>
              </div>
            </div>

            <div class="form-row" style="padding: 15px;">

              <div class="col-md-3">
                <div class="position-relative form-group">
                  <label for="nomFiche" class="">{{'CommunTranslate.FicheCollecte.nomFicheLabel' | translate}} (FR)*</label>
                  <input value="{{valeurNomFiche}}"
                         id="nomFiche"
                         class="form-control"
                         name="nomFiche"
                         ngModel="{{valeurNomFiche}}"
                         #nomFiche="ngModel"
                         required="required"
                         placeholder="{{'CommunTranslate.FicheCollecte.insererNomFiche' | translate}}... (FR)"
                  >
                  <small *ngIf="nomFiche.touched && nomFiche.invalid" style="color: red">{{'CommunTranslate.FicheCollecte.champObligatoireVeillezRemplir' | translate}}</small>
                </div>
              </div>

              <div class="col-md-3">
                <div class="position-relative form-group">
                  <label for="lienMenu" class="">{{'CommunTranslate.FicheCollecte.lienMenuLabel' | translate}} (FR)*</label>
                  <input value="{{valeurLienMenu}}"
                         class="form-control"
                         id="lienMenu"
                         name="lienMenu"
                         ngModel="{{valeurLienMenu}}"
                         #lienMenu="ngModel"
                         required="required"
                         placeholder="{{'CommunTranslate.FicheCollecte.insererLabel' | translate}}... (FR)"
                  >
                  <small *ngIf="lienMenu.touched && lienMenu.invalid" style="color: red">{{'CommunTranslate.FicheCollecte.champObligatoireVeillezRemplir' | translate}}</small>
                </div>
              </div>

              <div class="col-md-6">
                <div class="position-relative form-group">
                  <label for="description" class="">{{'CommunTranslate.FicheCollecte.descriptionLabel' | translate}} (FR)</label>
                  <input value="{{valeurDescription}}"
                         class="form-control"
                         id="description"
                         name="description"
                         ngModel="{{valeurDescription}}"
                         #description="ngModel"
                         placeholder="{{'CommunTranslate.FicheCollecte.decriverVotreFiche' | translate}}...(FR)"
                  >
                </div>
              </div>


              <div class="col-md-3">
                <div class="position-relative form-group">
                  <label for="nomFicheEN" class="">{{'CommunTranslate.FicheCollecte.nomFicheLabel' | translate}} (EN)*</label>
                  <input value="{{valeurNomFicheEN}}"
                         id="nomFicheEN"
                         class="form-control"
                         name="nomFicheEN"
                         ngModel="{{valeurNomFiche}}"
                         #nomFicheEN="ngModel"
                         placeholder="{{'CommunTranslate.FicheCollecte.insererNomFiche' | translate}}... (EN)"
                  >
                  <small *ngIf="nomFicheEN.touched && nomFicheEN.invalid" style="color: red">{{'CommunTranslate.FicheCollecte.champObligatoireVeillezRemplir' | translate}}</small>
                </div>
              </div>

              <div class="col-md-3">
                <div class="position-relative form-group">
                  <label for="lienMenuEN" class="">{{'CommunTranslate.FicheCollecte.lienMenuLabel' | translate}} (EN)*</label>
                  <input value="{{valeurLienMenuEN}}"
                         class="form-control"
                         id="lienMenuEN"
                         name="lienMenuEN"
                         ngModel="{{valeurLienMenuEN}}"
                         #lienMenuEN="ngModel"
                         placeholder="{{'CommunTranslate.FicheCollecte.insererLabel' | translate}}... (EN)"
                  >
                  <small *ngIf="lienMenuEN.touched && lienMenuEN.invalid" style="color: red">{{'CommunTranslate.FicheCollecte.champObligatoireVeillezRemplir' | translate}}</small>
                </div>
              </div>

              <div class="col-md-6">
                <div class="position-relative form-group">
                  <label for="descriptionEN" class="">{{descriptionLabel}} (EN)</label>
                  <input value="{{valeurDescriptionEN}}"
                         class="form-control"
                         id="descriptionEN"
                         name="descriptionEN"
                         ngModel="{{valeurDescriptionEN}}"
                         #descriptionEN="ngModel"
                         placeholder="{{'CommunTranslate.FicheCollecte.decriverVotreFiche' | translate}}...(EN)"
                  >
                </div>
              </div>


              <div class="col-md-12">
                <div class="position-relative form-group">
                  <label for="baseQuestionnaireID" class="">{{'CommunTranslate.FicheCollecte.baseQuestionnaireLabel' | translate}}*</label>
                  <select required="required"
                          value="{{valeurBaseQuestionnaire}}"
                          id="baseQuestionnaireID"
                          name="baseQuestionnaireID"
                          class="form-control"
                          ngModel="{{valeurBaseQuestionnaire}}"
                          #baseQuestionnaire="ngModel">
                    <option value="{{null}}" [selected]="true">{{'CommunTranslate.FicheCollecte.choisirBaseQuestionnaire' | translate}}...</option>
                    <option *ngFor="let base of questionnaires" value="{{base.id}}">{{base.nomBase}}</option>
                  </select>
                  <small *ngIf="baseQuestionnaire.touched && baseQuestionnaire.invalid" style="color: red">{{'CommunTranslate.FicheCollecte.champObligatoireVeillezRemplir' | translate}}</small>
                </div>
              </div>

            </div>
          </div>
        </form>

      </ng-template>
    </ngb-tab>




    <!--FIN DU FORMULAIRE INFORMATION GENERALE-->

    <ng-template #contentselect let-modal>
      <div class="modal-header" style="background-color: #4e4376; color: white">
        <h4 class="modal-title">Selection : {{valeurChampSpecial}}</h4>
        <button type="button" class="close" aria-label="Close" (click)="onQuitModalselect(modal)">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">

        <select class="form-control"
                [(ngModel)]="currentElementFiche.propriete"
                required="required">
          <ng-container *ngIf="valeurChampSpecial=='Especes'">
            <option value="{{null}}" [selected]="true">{{'CommunTranslate.FicheCollecte.choisir' | translate}}...</option>
            <option value="Volaille">{{'CommunTranslate.FicheCollecte.Volaille' | translate}}</option>
            <option value="Poisson">{{'CommunTranslate.FicheCollecte.poisson' | translate}}</option>
            <option value="Mamiphere">{{'CommunTranslate.FicheCollecte.mamiphere' | translate}}</option>
            <option value="Abeilles">{{'CommunTranslate.FicheCollecte.abailles' | translate}}</option>
            <option value="Crustaces">{{'CommunTranslate.FicheCollecte.crustaces' | translate}}</option>
            <option value="Amphibiens">{{'CommunTranslate.FicheCollecte.amphibiens' | translate}}</option>
            <option value="Mollusque">{{'CommunTranslate.FicheCollecte.mollusque' | translate}}</option>
            <option value="Lagomorphe">{{'CommunTranslate.FicheCollecte.lagomorphe' | translate}}</option>
            <option value="Suides">{{'CommunTranslate.FicheCollecte.suides' | translate}}</option>
          </ng-container>

          <ng-container *ngIf="valeurChampSpecial=='Maladies'">
            <option value="{{null}}" [selected]="true">{{'CommunTranslate.FicheCollecte.choisir' | translate}}...</option>
            <option value="Maladies, infections et infection communes a plusieurs especes">{{'CommunTranslate.FicheCollecte.MaladiesInfectionsInfectionCommunesPlusieursEspeces' | translate}}</option>
            <option value="Maladies et infections des bovins">{{'CommunTranslate.FicheCollecte.MaladiesInfectionsBovins' | translate}}</option>
            <option value="Maladies et infections des ovins et capris">{{'CommunTranslate.FicheCollecte.MaladiesInfectionsOvinsCapris' | translate}}</option>
            <option value="Maladies et infections des eguides">{{'CommunTranslate.FicheCollecte.MaladiesInfectionsEguides' | translate}}</option>
            <option value="Maladies et infections des suides">{{'CommunTranslate.FicheCollecte.MaladiesInfectionsSuides' | translate}}</option>
            <option value="Maladies et infections des oiseaux">{{'CommunTranslate.FicheCollecte.MaladiesInfectionsOiseaux' | translate}}</option>
            <option value="Maladies et infections des lagomorphes">{{'CommunTranslate.FicheCollecte.MaladiesInfectionsLagomorphes' | translate}}</option>
            <option value="Maladies, infections et infectations des choilles">{{'CommunTranslate.FicheCollecte.MaladiesInfectionsInfectationsChoilles' | translate}}</option>
            <option value="Maladies des poisons">{{'CommunTranslate.FicheCollecte.MaladiesPpoisons' | translate}}</option>
            <option value="Maladies des mollusques">{{'CommunTranslate.FicheCollecte.MaladiesMollusques' | translate}}</option>
            <option value="Maladies des MaladiesCrustaces">{{'CommunTranslate.FicheCollecte.MaladiesCrustaces' | translate}}</option>
            <option value="Maladies des amphibiens">{{'CommunTranslate.FicheCollecte.MaladiesAmphibiens' | translate}}</option>
          </ng-container>
        </select>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-light" (click)="onQuitModalselect(modal)">Close</button>
      </div>
    </ng-template>


    <ngb-tab>
      <ng-template ngbTabTitle>{{'CommunTranslate.FicheCollecte.InsererElementsFichesCollecteDonnees' | translate}}</ng-template>
      <ng-template ngbTabContent>
        &nbsp;
        &nbsp;
        &nbsp;
        &nbsp;
        <!-- PARAMETRAGE DES ELEMENTS LA FICHE-->
        <ng-template #content let-modal>
          <div class="modal-header" style="background-color: #4e4376; color: white">
            <h4 class="modal-title">{{'CommunTranslate.FicheCollecte.ElementsFiche' | translate}} : {{currentFile.nomFiche | uppercase}}</h4>
            <button type="button" class="close" aria-label="Close" (click)="onQuitModal(modal)">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div *ngIf="alertModalSuccess" style="color: green; text-align: center">
              <p>{{messageEnregistrement}}</p>
            </div>
            <div *ngIf="alertModalError" style="color: firebrick; text-align: center">
              <p>{{erreurEnregistrement}}</p>
            </div>
            <form *ngIf="elements.length>0" name="formE" #ff="ngForm">
              <div class="main-card mb-3 card">
                <div class="card-body">

                  <div class="form-row" style="padding: 15px;">
                    <table class="mb-0 table table-default">
                      <thead>
                      <tr>
                        <th></th>
                        <th>Type</th>
                        <th>{{'CommunTranslate.FicheCollecte.namelabel' | translate}} (FR)</th>
                        <th>{{'CommunTranslate.FicheCollecte.namelabel' | translate}} (EN)</th>
                        <th style="display: none">{{nameAlias}}</th>
                        <th>
                          {{nameProprieteChange}}
                        </th>
                        <th>{{'CommunTranslate.FicheCollecte.CadreAffichage' | translate}}</th>
                        <th>
                          <button class="btn btn-info"><i class="fa fa-edit"></i></button>
                        </th>
                        <th >
                          <button  class="btn btn-light">-</button>
                        </th>
                        <th>
                          <button class="btn btn-primary" (click)="addElement(ff)"
                                  [disabled]="visibleSpinner==true || onTouchFile==false">
                            <span *ngIf="visibleSpinner==false">+</span>
                            <div class="spinner-border spinner-border-sm" role="status" *ngIf="visibleSpinner==true">
                              <span class="sr-only">Loading...</span>
                            </div>
                          </button>
                        </th>
                      </tr>
                      </thead>
                      <tbody>
                      <!--<ng-template >-->

                      <tr *ngFor="let element of elements; let i = index;">
                        <td style="vertical-align: middle">
                          <div class="custom-control custom-radio" *ngIf="element.typeChamp=='ElementStatic' || element.typeChamp=='ElementStaticPourcent'">
                            <input #objBaseElementStatGeneral="ngModel"
                                   type="radio"
                                   id="baseElementStatGeneral{{i}}"
                                   name="baseElementStatGeneral"
                                   class="custom-control-input"
                                   value="{{element.id}}"
                                   style="border-width: 4px; cursor: pointer; border-color: #00b09b; width: 30px"
                                   ngModel="{{element.baseElementStatGeneral}}"
                                   (change)="onBaseElementStatGeneral(objBaseElementStatGeneral.value)"
                            />
                            <label class="custom-control-label" for="baseElementStatGeneral{{i}}"
                                   style="color: green"><i class="fa fa-check" *ngIf="element.baseElementStatGeneral!=null"></i></label>
                          </div>
                        </td>
                        <td>
                          <select id="typeChamp_{{i}}"
                                  #objTypeChamp="ngModel"
                                  name="typeChamp_{{i}}"
                                  class="form-control"
                                  ngModel="{{element.typeChamp}}"
                                  value="{{element.typeChamp}}"
                                  [ngbTooltip]="element.typeChamp"
                                  placement="left"
                                  (change)="onChangeNamepropriete(objTypeChamp, contentselect, element)">
                            <option hidden value="{{null}}" disabled
                                    [selected]="true">{{selectBaseQuestionnaire}}</option>
                            <option value="ElementStatic">{{'CommunTranslate.FicheCollecte.ElementStatistique' | translate}}</option>
                            <option value="ElementStaticPourcent">{{'CommunTranslate.FicheCollecte.ElementStatistiquePourcentage' | translate}}</option>
                            <!--taille du ELEMENT STATISTIQUE-->
                            <option value="text">{{'CommunTranslate.FicheCollecte.Texte' | translate}}</option> <!--taille du texte-->
                            <option value="textarea">{{'CommunTranslate.FicheCollecte.TexteLong' | translate}}</option><!--taille du texte-->
                            <option value="email">Email</option> <!--format email-->
                            <option value="date">Date</option> <!--format de date-->
                            <option value="number">{{'CommunTranslate.FicheCollecte.Numero' | translate}}</option> <!--format numero-->
                            <option value="questionreponse">{{'CommunTranslate.FicheCollecte.QuestionReponse' | translate}}</option> <!--question reponse-->
                            <option value="ouinon">{{'CommunTranslate.FicheCollecte.QuestionOuiNon' | translate}}</option> <!--question reponse-->
                            <option value="file">{{'CommunTranslate.FicheCollecte.Fichier' | translate}}</option> <!--taille du fichier-->
                            <option value="select">{{'CommunTranslate.FicheCollecte.Selection' | translate}}</option><!--different option, separer dunne virgule-->
                            <option value="url">Url</option> <!--format URL-->
                            <option value="time">{{'CommunTranslate.FicheCollecte.Heure' | translate}}</option> <!--Format heure-->
                            <option value="cadre">{{'CommunTranslate.FicheCollecte.CadreAffichage' | translate}}</option>
                            <option value="metaDonnees">{{'CommunTranslate.FicheCollecte.MetaDonnees' | translate}}</option>
                            <option value="cadrequestion">{{'CommunTranslate.FicheCollecte.CadreQuestion' | translate}}</option>
                            <option value="coordonnee">{{'CommunTranslate.FicheCollecte.CoordonneeGPS' | translate}}</option>
                            <option value="localisation">
                              <ng-container *ngIf="modeApply.MODE=='cahis'">{{'CommunTranslate.FicheCollecte.LocalisationNivauxCZV' | translate}}</ng-container>
                              <ng-container *ngIf="modeApply.MODE=='syrem'">{{'CommunTranslate.FicheCollecte.Localisation' | translate}}</ng-container>
                            </option>
                            <!--<option value="geolocalisation">Geolocalisation</option>-->
                            <ng-container *ngIf="modeApply.MODE=='cahis'">
                              <option value="localisationVillage">{{'CommunTranslate.FicheCollecte.LocalisationNivauxVillage' | translate}}</option>
                              <option value="laboratoires">{{'CommunTranslate.FicheCollecte.SelectionLaboratoires' | translate}}</option>
                              <option value="especes">{{'CommunTranslate.FicheCollecte.SelectionEspeces' | translate}}</option>
                              <option value="pathologies">{{'CommunTranslate.FicheCollecte.SelectionPathologies' | translate}}</option>
                              <option value="naturePrelevement">{{'CommunTranslate.FicheCollecte.naturePrelevement' | translate}}</option>
                              <option value="typeAnalyse">{{'CommunTranslate.FicheCollecte.typeAnalyse' | translate}}</option>
                              <option value="maladies">{{'CommunTranslate.FicheCollecte.maladies' | translate}}</option>
                              <option value="oie">{{'CommunTranslate.FicheCollecte.oie' | translate}}</option>
                              <option value="sourceContamination">{{'CommunTranslate.FicheCollecte.sourceContamination' | translate}}</option>
                              <option value="mesureControle">{{'CommunTranslate.FicheCollecte.mesureControle' | translate}}</option>
                              <option value="typeVaccin">{{'CommunTranslate.FicheCollecte.typeVaccin' | translate}}</option>
                              <option value="typeProduction">{{'CommunTranslate.FicheCollecte.typeProduction' | translate}}</option>
                              <option value="systemeProduction">{{'CommunTranslate.FicheCollecte.systemeProduction' | translate}}</option>
                            </ng-container>
                          </select>
                        </td>

                        <td>
                          <input style="display: none"
                                 id="id_{{i}}"
                                 #objid="ngModel"
                                 value="{{element.id}}"
                                 type="text"
                                 name="id_{{i}}"
                                 class="form-control"
                                 ngModel="{{element.id}}"

                          />
                          <input id="labelChamp_{{i}}"
                                 #objlabelChamp="ngModel"
                                 value="{{element.labelChamp}}"
                                 type="text"
                                 name="labelChamp_{{i}}"
                                 class="form-control"
                                 ngModel="{{element.labelChamp}}"
                                 ngbTooltip="{{element.labelChamp}}"
                                 placement="right"
                                 [disabled]="objTypeChamp.value=='metaDonnees' ||
                                                objTypeChamp.value=='localisation' ||
                                                objTypeChamp.value=='localisationVillage' ||
                                                objTypeChamp.value=='coordonnee'"

                          />
                        </td>
                        <td>
                          <input id="labelChampEN_{{i}}"
                                 #objlabelChampEN="ngModel"
                                 value="{{element.labelChampEN}}"
                                 type="text"
                                 name="labelChampEN_{{i}}"
                                 class="form-control"
                                 ngModel="{{element.labelChampEN}}"
                                 ngbTooltip="{{element.labelChampEN}}"
                                 placement="right"
                                 [disabled]="objTypeChamp.value=='metaDonnees' ||
                                                objTypeChamp.value=='localisation' ||
                                                objTypeChamp.value=='localisationVillage' ||
                                                objTypeChamp.value=='coordonnee'"
                          />
                        </td>
                        <td style="display: none">
                          <input id="alia_{{i}}"
                                 #objalias="ngModel"
                                 value="{{element.alias}}"
                                 ngModel="{{element.alias}}"
                                 type="text"
                                 name="alia_{{i}}"
                                 class="form-control"/>
                        </td>
                        <td>
                          <input [disabled]="objTypeChamp.value=='localisation' ||
                                        objTypeChamp.value=='geolocalisation' ||
                                        objTypeChamp.value=='localisationVillage' ||
                                        objTypeChamp.value=='metaDonnees' ||
                                        objTypeChamp.value=='coordonnee' ||
                                        objTypeChamp.value=='cadrequestion' ||
                                        objTypeChamp.value=='questionreponse' ||
                                        objTypeChamp.value=='ouinon' ||
                                        objTypeChamp.value=='laboratoires' ||
                                        objTypeChamp.value=='pathologies' ||
                                        objTypeChamp.value=='naturePrelevement' ||
                                        objTypeChamp.value=='typeAnalyse' ||
                                        objTypeChamp.value=='oie' ||
                                        objTypeChamp.value=='sourceContamination' ||
                                        objTypeChamp.value=='mesureControle' ||
                                        objTypeChamp.value=='typeVaccin' ||
                                        objTypeChamp.value=='typeProduction' ||
                                        objTypeChamp.value=='systemeProduction'"
                                 id="propriete_{{i}}"
                                 [readOnly]="objTypeChamp.value=='especes' || objTypeChamp.value=='maladies'"
                                 #objpropriete="ngModel"
                                 value="{{element.propriete}}"
                                 type="text"
                                 name="propriete_{{i}}"
                                 class="form-control"
                                 ngbTooltip="{{element.propriete}}"
                                 placement="right"
                                 ngModel="{{element.propriete}}"/>
                        </td>

                        <td>
                          <select id="cadreAffichage_{{i}}"
                                  [disabled]="objTypeChamp.value=='cadre' ||
                                                objTypeChamp.value=='localisation' ||
                                                objTypeChamp.value=='localisationVillage' ||
                                                objTypeChamp.value=='geolocalisation' ||
                                                objTypeChamp.value=='coordonnee' ||
                                                objTypeChamp.value=='metaDonnees' ||
                                                objTypeChamp.value=='cadrequestion'"
                                  name="cadreAffichage_{{i}}"
                                  #objcadreAffichage="ngModel"
                                  value="{{element.cadreAffichage}}"
                                  ngModel="{{element.cadreAffichage}}"
                                  ngbTooltip="{{element.cadreAffichage}}"
                                  placement="right"
                                  class="form-control">
                            <option value="{{null}}" [selected]="true">{{selectCadreAffichage}}</option>
                            <option value="principal">Cadre principale</option>
                            <ng-container *ngFor="let itemCadre of cardreAffichage">
                              <option *ngIf="itemCadre.cadreAffichage==null &&
                                                itemCadre.id!=null &&
                                                itemCadre.typeChamp !='localisation' &&
                                                itemCadre.typeChamp !='localisationVillage' &&
                                                itemCadre.typeChamp !='metaDonnees' &&
                                                itemCadre.typeChamp !='geolocalisation' &&
                                                itemCadre.typeChamp !='coordonnee' &&
                                                itemCadre.typeChamp !='laboratoires' &&
                                                itemCadre.typeChamp !='especes' &&
                                                itemCadre.typeChamp !='pathologies' &&
                                                itemCadre.typeChamp !='naturePrelevement' &&
                                                itemCadre.typeChamp !='typeAnalyse' &&
                                                itemCadre.typeChamp !='oie' &&
                                                itemCadre.typeChamp !='sourceContamination' &&
                                                itemCadre.typeChamp !='mesureControle' &&
                                                itemCadre.typeChamp !='typeVaccin' &&
                                                itemCadre.typeChamp !='typeProduction' &&
                                                itemCadre.typeChamp !='systemeProduction' &&
                                                itemCadre.typeChamp !='maladies'
                                                ">
                                {{itemCadre.labelChamp}}
                              </option>
                            </ng-container>
                          </select>
                        </td>
                        <td>
                          <button class="btn btn-info"
                                  (click)="onUpdateElement(objlabelChamp,objlabelChampEN,
                                                              objalias,
                                                              objTypeChamp,
                                                              objpropriete,
                                                              objcadreAffichage,
                                                              element)"
                                  [disabled]="onTouchFile==false || element.id==null"><i class="fa fa-edit"></i></button>
                        </td>
                        <td>
                          <button class="mb-2 mr-2  btn btn-light"
                                  (click)="removeElement(element, i)" [disabled]="onTouchFile==false || element.id==null">-
                          </button>
                        </td>
                        <td *ngIf="element.id==null">
                          <button class="btn btn-primary" (click)="addElement(ff)"
                                  [disabled]="visibleSpinner==true || onTouchFile==false">
                            <span *ngIf="visibleSpinner==false">+</span>
                            <div class="spinner-border spinner-border-sm" role="status" *ngIf="visibleSpinner==true">
                              <span class="sr-only">Loading...</span>
                            </div>
                          </button>
                        </td>
                      </tr>
                      <!-- </ng-template>-->
                      </tbody>

                    </table>
                  </div>
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-light" (click)="onQuitModal(modal)">Close</button>
          </div>
        </ng-template>


        <!--LISTE DES FICHES DEJA ENREGISTRE-->
        <div class="main-card mb-3 card">
          <div class="card-body">
            <div class="card-header-tab card-header">

              <button class="btn btn-info" placement="left" ngbTooltip="{{'CommunTranslate.FicheCollecte.RafraichirVotreTableau' | translate}}" (click)="onLoading()" style="display: inline-block; float: right"><i class="fa fa-undo"></i></button>&nbsp;&nbsp;&nbsp;

              <h5 class="card-title" style="display: inline-block">
                {{'CommunTranslate.FicheCollecte.labelTitreTableau' | translate}}
              </h5>

              <input #valNbre type="number" ngModel step="10" style="width: 80px; display: inline-block; margin-left: 30px" [min]="10" [max]="listForPaginaition.length"
                     value="{{10}}" *ngIf="pageOfItems.length>0 && (term==undefined || term=='')" (change)="onChangeNbreDatasAffiche(valNbre.value)"/>&nbsp;&nbsp;

              <p *ngIf="pageOfItems.length>0 && (term==undefined || term=='')" style="display: inline-block">
                <em>{{'CommunTranslate.FicheCollecte.NavigationDonneesAffichees' | translate}} : </em> <strong>{{pageOfItems.length}} / {{listForPaginaition.length}}</strong>
              </p>

              <div class="btn-actions-pane-right text-capitalize">
                <input class="form-control" type="text" placeholder="Search..." [(ngModel)]="term" />
              </div>

            </div>

            <table style="width: 100%;" id="example" class="table table-hover table-striped table-bordered data-export">
              <thead>
              <tr>
                <th style="font-weight: bold">#</th>
                <th>{{'CommunTranslate.FicheCollecte.NomFiche' | translate}}</th>
                <th>{{'CommunTranslate.FicheCollecte.LienMenu' | translate}}</th>
                <th>{{'CommunTranslate.FicheCollecte.Description' | translate}}</th>
                <th>{{'CommunTranslate.FicheCollecte.BaseQuestionnaires' | translate}}</th>
                <th style="width: 25px;">
                  <button class="btn"><i class="fa fa-eye"></i></button>
                </th>
                <th style="width: 25px;">
                  <button class="btn"><i class="fa fa-th"></i></button>
                </th>
                <th style="width: 25px;">
                  <button class="btn"><i class="fa fa-edit"></i></button>
                </th>
                <th style="width: 25px;">
                  <button class="btn"><i class="fa fa-trash"></i></button>
                </th>
                <th style="width: 25px;">
                  <button class="btn"><i class="fa fa-copy"></i></button>
                </th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor=" let fichecollectes of (term==undefined || term=='' ? pageOfItems : listForPaginaition) | filter : term; let i = index">
                <td style="font-weight: bold">{{i+1}}</td>
                <td style="cursor: pointer">
                  <div class="custom-control custom-radio">
                    <input #objElementStaDefault="ngModel"
                           type="radio"
                           id="customRadio{{i}}"
                           name="customRadio"
                           value="{{fichecollectes.id}}"
                           ngModel="{{fichecollectes.elementStatDefault}}"
                           class="custom-control-input"
                           (change)="onChoiseElementStat(objElementStaDefault.value)"
                    >
                    <label class="custom-control-label" for="customRadio{{i}}">{{fichecollectes.nomFiche}}</label>
                  </div>
                </td>
                <td>{{fichecollectes.lienMenu}}</td>
                <td>{{fichecollectes.description | formatTextToolLong:35}}</td>
                <td>{{fichecollectes.baseQuestionnaireID.nomBase}}</td>
                <td>
                  <button title="{{'CommunTranslate.FicheCollecte.PrevisualisationFiche' | translate}}" class="btn btn-secondary"
                          (click)="onPreView(fichecollectes)"><i class="fa fa-eye"></i></button>
                </td>
                <td>
                  <button title="{{'CommunTranslate.FicheCollecte.AjouterElementsDansFiche' | translate}}" class="btn btn-info"
                          (click)="onChargerElement(fichecollectes.id, content)"><i class="fa fa-th"></i></button>
                </td>
                <td>
                  <button title="{{'CommunTranslate.FicheCollecte.ModifierFiche' | translate}}" class="btn btn-info"
                          (click)="onSelectFicheCollecte(fichecollectes)"><i class="fa fa-edit"></i></button>
                </td>
                <td>
                  <button title="{{'CommunTranslate.FicheCollecte.Supprimer' | translate}}" class="btn btn-danger"
                          (click)="onDeleteFicheCollecte(fichecollectes.id)"><i class="fa fa-trash"></i></button>
                </td>
                <td>
                  <button title="{{'CommunTranslate.FicheCollecte.dupliquerFiche' | translate}}" class="btn btn-primary"
                          (click)="onDuplicateFicheCollecte(fichecollectes.id)"><i class="fa fa-copy"></i></button>
                </td>
              </tr>
              </tbody>

              <tr *ngIf="listForPaginaition.length > LIMIT_PARGINATION && (term==undefined || term=='')">
                <td colspan="10">
                  <ngb-pagination (pageChange)="onChangePageRecup($event)" maxSize="7" [pageSize]="LIMIT_PARGINATION"
                                  [collectionSize]="countItemAffcihe" [(page)]="page"
                                  [boundaryLinks]="true"></ngb-pagination>
                </td>
              </tr>

              <tr *ngIf="pageOfItems.length==0">
                <td colspan="11">
                  {{'CommunTranslate.FicheCollecte.AucuneDonnee' | translate}}
                </td>
              </tr>

            </table>
          </div>
        </div>
      </ng-template>
    </ngb-tab>
  </ngb-tabset>
  <!-- FIN DES LISTES DEJA ENREGISTRE-->
</div>
